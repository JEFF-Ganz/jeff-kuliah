<?php session_start();require 'includes/db.php';if(isLoggedIn())header('Location: dashboard.php'),exit();$error='';$success='';if($_SERVER['REQUEST_METHOD']==='POST'){$a=$_POST['action']??'';if($a==='login'){$u=trim($_POST['username']??'');$p=$_POST['password']??'';if(empty($u)||empty($p))$error='âŒ Username dan password tidak boleh kosong!';else{$r=loginUser($pdo,$u,$p);if($r['success'])header('Location: dashboard.php'),exit();else $error='âŒ '.$r['message'];}}elseif($a==='register'){$u=trim($_POST['username']??'');$p=$_POST['password']??'';$pc=$_POST['password_confirm']??'';if(empty($u)||empty($p)||empty($pc))$error='âŒ Semua field harus diisi!';elseif($p!==$pc)$error='âŒ Password tidak cocok!';elseif(strlen($p)<6)$error='âŒ Password minimal 6 karakter!';else{$r=registerUser($pdo,$u,$p);if($r['success'])$success='âœ… '.$r['message'];else $error='âŒ '.$r['message'];}}}?><!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Login & Register - Student Academic Planner</title><link rel="stylesheet" href="css/style.min.css"></head><body class="auth-page"><div class="auth-container"><div class="auth-box"><h1 class="auth-title">ğŸ“š Student Academic Planner</h1><p class="auth-subtitle">Kelola jadwal & tugas akademikmu dengan mudah!</p><div class="tabs"><button class="tab-button active" onclick="switchTab('login')">Login</button><button class="tab-button" onclick="switchTab('register')">Daftar</button></div><form id="login-form" class="auth-form active" method="POST"><input type="hidden" name="action" value="login"><?php if($error&&strpos($_POST['action']??'',"login")!==false):?><div class="alert alert-error"><?php echo $error;?></div><?php endif;?><div class="form-group"><label for="login-username">Username</label><input type="text" id="login-username" name="username" placeholder="Masukkan username" required></div><div class="form-group"><label for="login-password">Password</label><input type="password" id="login-password" name="password" placeholder="Masukkan password" required></div><button type="submit" class="btn btn-primary btn-block">ğŸ”“ Login</button></form><form id="register-form" class="auth-form" method="POST"><input type="hidden" name="action" value="register"><?php if($error&&strpos($_POST['action']??'',"register")!==false):?><div class="alert alert-error"><?php echo $error;?></div><?php endif;?><?php if($success):?><div class="alert alert-success"><?php echo $success;?></div><?php endif;?><div class="form-group"><label for="register-username">Username</label><input type="text" id="register-username" name="username" placeholder="Pilih username" required></div><div class="form-group"><label for="register-password">Password</label><input type="password" id="register-password" name="password" placeholder="Min. 6 karakter" required></div><div class="form-group"><label for="register-password-confirm">Konfirmasi Password</label><input type="password" id="register-password-confirm" name="password_confirm" placeholder="Ulangi password" required></div><button type="submit" class="btn btn-success btn-block">âœ”ï¸ Daftar Sekarang</button></form><div class="auth-info"><p>Akun dummy untuk testing:</p><p><strong>Username:</strong> testuser</p><p><strong>Password:</strong> password123</p></div></div></div><script>function switchTab(t){document.querySelectorAll(".auth-form").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".tab-button").forEach(e=>e.classList.remove("active")),document.getElementById(t+"-form").classList.add("active"),event.target.classList.add("active")}</script></body></html>
